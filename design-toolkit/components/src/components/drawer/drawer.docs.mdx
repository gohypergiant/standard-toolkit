import { Canvas, Meta } from '@storybook/blocks';

import * as DrawerStories from './drawer.stories';

<Meta of={DrawerStories}/>

# Drawer

The Drawer component provides a flexible, accessible UI pattern for displaying content in a panel that slides in from the edge of the viewport. It is commonly used for navigation, menus, or contextual panels. The Drawer is built on top of the ViewStack system, allowing for stacked views, programmatic triggers, and nested navigation.

It is composed of the following components:

- **Drawer** – Root component that manages the drawer state and view stack
- **Drawer.Layout** – Container for layout structure, supports extending specific drawer's layout and drawer's push/overlay behavior
- **Drawer.Menu** – Navigation menu for switching between views
- **Drawer.Menu.Item** – Individual menu item, can trigger open/toggle for a drawer as well as show a specific view. Supports tooltips for better accessibility and user experience.
- **Drawer.Panel** – Main panel container for drawer content
- **Drawer.View** – Content region for a specific view, mapped to a unique id
- **Drawer.Header** – Header region, typically for titles or actions. Supports a `title` prop for automatic header layout with back/close buttons
- **Drawer.Header.Title** – Heading element, supports semantic levels and styling
- **Drawer.Content** – Main content area within a view
- **Drawer.Footer** – Footer region for actions or supplementary info
- **Drawer.Trigger** – Programmatic trigger for drawer/view actions

The Drawer enforces a predictable child structure: only one Drawer.Panel is allowed per Drawer, and Drawer.Menu is optional.

## Example Usage

### Using the Simplified Title Prop
```
const ids = {
  drawer: uuid(),
  a: uuid(),
  b: uuid(),
};

<Drawer id={ids.drawer} defaultView={ids.a}>
  <Drawer.Menu>
    <Drawer.Menu.Item for={ids.a}>View A</Drawer.Menu.Item>
    <Drawer.Menu.Item for={ids.b}>View B</Drawer.Menu.Item>
  </Drawer.Menu>
  <Drawer.Panel>
    <Drawer.View id={ids.a}>
      <Drawer.Header title="Title A" />
      <Drawer.Content>
        Content for View A
      </Drawer.Content>
      <Drawer.Footer>
        Footer Actions
      </Drawer.Footer>
    </Drawer.View>
    <Drawer.View id={ids.b}>
      <Drawer.Header title="Title B" />
      <Drawer.Content>
        Content for View B
      </Drawer.Content>
      <Drawer.Footer>
        Footer Actions
      </Drawer.Footer>
    </Drawer.View>
  </Drawer.Panel>
</Drawer>
```

### Using Custom Header Layout
```
const ids = {
  drawer: uuid(),
  a: uuid(),
  b: uuid(),
};

<Drawer id={ids.drawer} defaultView={ids.a}>
  <Drawer.Menu>
    <Drawer.Menu.Item for={ids.a} textValue="View A">View A</Drawer.Menu.Item>
    <Drawer.Menu.Item for={ids.b} textValue="View B">View B</Drawer.Menu.Item>
  </Drawer.Menu>
  <Drawer.Panel>
    <Drawer.View id={ids.a}>
      <Drawer.Header>
        <Drawer.Header.Title level={2}>Title A</Drawer.Header.Title>
        {/* Custom actions can go here */}
      </Drawer.Header>
      <Drawer.Content>
        Content for View A
      </Drawer.Content>
      <Drawer.Footer>
        Footer Actions
      </Drawer.Footer>
    </Drawer.View>
    <Drawer.View id={ids.b}>
      <Drawer.Header>
        <Drawer.Header.Title level={2}>Title B</Drawer.Header.Title>
      </Drawer.Header>
      <Drawer.Content>
        Content for View B
      </Drawer.Content>
      <Drawer.Footer>
        Footer Actions
      </Drawer.Footer>
    </Drawer.View>
  </Drawer.Panel>
</Drawer>
```

<Canvas of={DrawerStories.StaticHeaderFooter} />

## Drawer.Header

The Drawer.Header component provides two ways to create headers:

### Simplified Header with Title Prop

For common use cases, you can use the `title` prop to automatically create a header with:
- A back button (when navigating to nested views)
- The title text
- A close button

```
<Drawer.Header title="My Title" />
```

This automatically handles the layout and provides appropriate semantic heading levels based on the view stack depth.

### Custom Header Layout

For more control over the header content, you can use a compositional approach:

```
<Drawer.Header>
  <Drawer.Header.Title level={2}>My Title</Drawer.Header.Title>
  <Drawer.Close />
</Drawer.Header>
```
## Drawer.Menu.Item

The Drawer.Menu.Item component represents individual navigation items within the drawer menu.

- **`for`** - The unique identifier fo the view this item should navigate to
- **`toggle`** - When `true`, the menu item will toggle the visibility of the associated view instead of just opening it
- **`textValue`** - Text that will be displayed in a tooltip when hovering over the menu item
- **`classNames`** - Optional class names for custom styling of the item and tooltip
  - `item` - Class name applied to the menu item
  - `tooltip` - Class name applied to the tooltip

When `textValue` is provided, a tooltip will appear on hover, enhancing accessibility and user experience.

## Drawer.View

The Drawer.View is the content region that will be visible when that view's id is active. The view can be deeply nested and contain any content.

## Drawer.Trigger

Drawer.Trigger enables transitioning between views or controlling the drawer programmatically. The `for` prop dictates its behavior:

- `'open'`, `'toggle'`, `'close'`: Control the drawer state
- A `UniqueId`: Pushes the corresponding view onto the stack
- `[any combination of the above]` (array): Each event is fired in sequence

## Variants

* **small** - Compact drawer with minimal width, suitable for simple navigation
* **medium** - Standard drawer size with balanced content space (default)
* **large** - Spacious drawer with maximum content area for complex interfaces

## Implementation Notes

[Github Source](https://github.com/gohypergiant/standard-toolkit/tree/main/design-toolkit/components/src/components/drawer)

- Uses Tagged UUIDs for unique view identification
- Events are managed via `@accelint/bus` for open/toggle/close actions
- Integrates with ViewStack for stacked navigation and triggers
- Accessible by default, with ARIA roles and keyboard support

See [ViewStack documentation](?path=/docs/components-viewstack--playground) for details on how to use the ViewStack component.
