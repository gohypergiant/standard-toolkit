[
  {
    "$schema": "https://logicstamp.dev/schemas/context/v0.1.json",
    "position": "1/1",
    "type": "LogicStampBundle",
    "schemaVersion": "0.1",
    "entryId": "hooks/kanban/index.ts",
    "depth": 2,
    "createdAt": "2025-12-22T18:06:44.142Z",
    "bundleHash": "uifb:9b11d01595beab59de6a4e2a",
    "graph": {
      "nodes": [
        {
          "entryId": "hooks/kanban/index.ts",
          "contract": {
            "type": "UIFContract",
            "schemaVersion": "0.3",
            "kind": "react:hook",
            "entryId": "hooks/kanban/index.ts",
            "description": "index - Custom React hook",
            "version": {
              "variables": [],
              "hooks": ["useDndContext", "useDroppable", "useSortable"],
              "components": [],
              "functions": ["useCardInteractions", "useColumnInteractions"],
              "imports": [
                "@/components/kanban/context",
                "@/components/kanban/types",
                "@dnd-kit/core",
                "@dnd-kit/sortable",
                "@dnd-kit/utilities"
              ]
            },
            "logicSignature": {
              "props": {},
              "emits": {}
            },
            "exports": {
              "named": ["useCardInteractions", "useColumnInteractions"]
            },
            "semanticHash": "uif:c69b84c2994d09ac93287f59",
            "fileHash": "uif:287420543d35c9c1489a8147"
          },
          "codeHeader": null,
          "code": "/*\n * Copyright 2025 Hypergiant Galactic Systems Inc. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport { useDndContext, useDroppable } from '@dnd-kit/core';\nimport { useSortable } from '@dnd-kit/sortable';\nimport { CSS } from '@dnd-kit/utilities';\nimport { calculateClosestEdge } from '@/components/kanban/context';\nimport type {\n  KanbanCardData,\n  KanbanColumnData,\n} from '@/components/kanban/types';\n\n/**\n * Hook that provides drag-and-drop interactions for a kanban column.\n *\n * This hook integrates with `@dnd-kit/core` to enable dropping cards into columns.\n * It tracks hover states, validates drop targets based on the column's `canDrop` property,\n * and provides visual feedback states for both the column itself and cards within it.\n *\n * @param column - The kanban column data object containing the column's id, canDrop status, and other properties\n *\n * @returns An object containing:\n * - `ref` - Ref callback to attach to the droppable column DOM element\n * - `isHighlighted` - Boolean indicating if the column should be visually highlighted (when a card from another column is being dragged)\n * - `isActive` - Boolean indicating if the column is actively being hovered over and can accept the drop\n *\n * @example\n * ```tsx\n * function KanbanColumn({ column }: { column: KanbanColumnData }) {\n *   const { ref, isHighlighted, isActive } = useColumnInteractions(column);\n *\n *   return (\n *     <div\n *       ref={ref}\n *       className={cn({\n *         'ring-2 ring-blue-300': isHighlighted && !isActive, // Potential drop target\n *         'ring-2 ring-blue-500 bg-blue-50': isActive,        // Active drop target\n *       })}\n *     >\n *       <h2>{column.title}</h2>\n *       {column.cards.map(card => <Card key={card.id} card={card} />)}\n *     </div>\n *   );\n * }\n * ```\n */\nexport function useColumnInteractions(column: KanbanColumnData) {\n  const { setNodeRef, isOver, active } = useDroppable({\n    id: column.id,\n    data: column,\n  });\n\n  // Get the global over state to detect when hovering over cards in this column\n  const { over } = useDndContext();\n\n  // Check if we're over the column itself OR over a card that belongs to this column\n  const isOverColumn = isOver || over?.data?.current?.columnId === column.id;\n\n  const isHighlighted = Boolean(\n    isOverColumn ||\n      (active &&\n        active.data.current?.columnId !== column.id &&\n        column.canDrop !== false),\n  );\n\n  const isActive = isOverColumn && column.canDrop !== false;\n\n  return {\n    ref: setNodeRef,\n    isHighlighted,\n    isActive,\n  };\n}\n\n/**\n * Hook that provides drag-and-drop interactions for a kanban card.\n *\n * This hook integrates with `@dnd-kit/sortable` to enable dragging, dropping, and reordering\n * of cards within and between columns. It handles transform animations, drag state tracking,\n * and edge detection for insertion positioning.\n *\n * @param card - The kanban card data object containing the card's id and other properties\n *\n * @returns An object containing:\n * - `ref` - Ref callback to attach to the draggable card DOM element\n * - `isDragging` - Boolean indicating if this card is currently being dragged\n * - `closestEdge` - The closest edge ('top' or 'bottom') when another card is hovering over this card, or null if not hovering\n * - `style` - CSS style object with transform and transition properties for drag animations\n * - `attributes` - Accessibility and drag attributes to spread on the card element\n * - `listeners` - Event listeners to spread on the drag handle element\n *\n * @example\n * ```tsx\n * function KanbanCard({ card }: { card: KanbanCardData }) {\n *   const { ref, isDragging, closestEdge, style, attributes, listeners } = useCardInteractions(card);\n *\n *   return (\n *     <div ref={ref} style={style} {...attributes} {...listeners}>\n *       {card.title}\n *       {closestEdge && <DropIndicator edge={closestEdge} />}\n *     </div>\n *   );\n * }\n * ```\n */\nexport function useCardInteractions(card: KanbanCardData) {\n  const {\n    attributes,\n    listeners,\n    setNodeRef,\n    transform,\n    transition,\n    isDragging,\n    over,\n    active,\n  } = useSortable({\n    id: card.id,\n    data: card,\n  });\n\n  const style = {\n    transform: CSS.Transform.toString(transform),\n    transition,\n  };\n\n  // Determine closest edge based on over position\n  let closestEdge: 'top' | 'bottom' | undefined;\n\n  if (over && over.id === card.id && active) {\n    closestEdge = calculateClosestEdge(over, active);\n  }\n\n  return {\n    ref: setNodeRef,\n    isDragging,\n    closestEdge,\n    style,\n    attributes,\n    listeners,\n  };\n}\n"
        }
      ],
      "edges": []
    },
    "meta": {
      "missing": [],
      "source": "logicstamp-context@0.3.2"
    }
  }
]
