import { Canvas, Meta } from '@storybook/addon-docs/blocks';

import * as ChipStories from './chip.stories';

<Meta of={ChipStories} />

# Chip
Compact, interactive elements for displaying tags, categories, filters, and selectable items. Built on React Aria Components with accessibility out of the box.

Components:
- **Chip** - Display tags and labels
- **ChipList** - Container for grouping chips with shared behavior
- **SelectableChip** - Chip that can be selected/deselected for filtering
- **DeletableChip** - Chip with remove button for dynamic content management

## Example Usage

### Basic Chip
```tsx
<Chip>Tag</Chip>
<Chip color="info">Information</Chip>
<Chip color="advisory">Warning</Chip>
<Chip color="normal">Success</Chip>
<Chip color="serious">Caution</Chip>
<Chip color="critical">Error</Chip>
```
<Canvas of={ChipStories.Default} />

### Chip List
```tsx
<ChipList>
  <Chip color="info">React</Chip>
  <Chip color="advisory">TypeScript</Chip>
  <Chip color="normal">Node.js</Chip>
</ChipList>
```
<Canvas of={ChipStories.List} />

### Selectable Chips
Chips that can be selected for filtering or multi-select interfaces.
```tsx
<ChipList selectionMode="multiple" disallowEmptySelection={false}>
  <SelectableChip id="react">React</SelectableChip>
  <SelectableChip id="vue">Vue</SelectableChip>
  <SelectableChip id="angular">Angular</SelectableChip>
</ChipList>
```
<Canvas of={ChipStories.SelectableChipList} />

### Selectable Chips with Colors
```tsx
<ChipList selectionMode="single">
  <SelectableChip id="up" color="normal">UP</SelectableChip>
  <SelectableChip id="down" color="critical">DOWN</SelectableChip>
  <SelectableChip id="all" color="info">All</SelectableChip>
</ChipList>
```
<Canvas of={ChipStories.SelectableChipListWithColors} />

### Deletable Chips
Chips with remove functionality. Requires `onRemove` handler on ChipList.
```tsx
<ChipList onRemove={(keys) => console.log('Removed:', keys)}>
  <DeletableChip id="tag1">JavaScript</DeletableChip>
  <DeletableChip id="tag2">Python</DeletableChip>
  <DeletableChip id="tag3">Go</DeletableChip>
</ChipList>
```
<Canvas of={ChipStories.DeletableChipList} />

## Colors

| Color | Description |
|-------|-------------|
| `info` | Blue styling for informational content (default) |
| `advisory` | Yellow styling for advisory/warning content |
| `normal` | Green styling for normal/success content |
| `serious` | Orange styling for serious issues |
| `critical` | Red styling for critical errors or alerts |

## Sizes

| Size | Description |
|------|-------------|
| `medium` | Standard size (default for Chip, SelectableChip, DeletableChip) |
| `small` | Compact size (default for ChipList) |

## Props

### Chip

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `color` | `'info' \| 'advisory' \| 'normal' \| 'serious' \| 'critical'` | `'info'` | Visual color style |
| `size` | `'medium' \| 'small'` | `'medium'` | Size variant |
| `children` | `ReactNode` | - | Chip content |
| `className` | `string` | - | Additional CSS classes |

### ChipList
Extends [`TagGroup`](https://react-spectrum.adobe.com/react-aria/TagGroup.html#props) props from react-aria-components.

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `color` | `'info' \| 'advisory' \| 'normal' \| 'serious' \| 'critical'` | - | Color for all child chips |
| `size` | `'medium' \| 'small'` | `'small'` | Size for all child chips |
| `items` | `Iterable<T>` | - | Items for controlled rendering |
| `dependencies` | `any[]` | - | Dependencies for re-rendering |
| `renderEmptyState` | `() => ReactNode` | - | Render when no items exist |
| `onRemove` | `(keys: Set<Key>) => void` | - | Called when chips are removed |
| `selectionMode` | `'none' \| 'single' \| 'multiple'` | `'none'` | Selection behavior |
| `disallowEmptySelection` | `boolean` | `false` | Prevent empty selection |
| `selectedKeys` | `'all' \| Iterable<Key>` | - | Controlled selected keys |
| `defaultSelectedKeys` | `'all' \| Iterable<Key>` | - | Default selected keys |
| `onSelectionChange` | `(keys: Selection) => void` | - | Called on selection change |
| `disabledKeys` | `Iterable<Key>` | - | Keys of disabled chips |

### SelectableChip
Extends [`Tag`](https://react-spectrum.adobe.com/react-aria/TagGroup.html#tag) props from react-aria-components.

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `id` | `Key` | - | Unique identifier (required) |
| `color` | `'info' \| 'advisory' \| 'normal' \| 'serious' \| 'critical'` | - | Visual color style |
| `size` | `'medium' \| 'small'` | `'medium'` | Size variant |
| `className` | `string` | - | Additional CSS classes |

### DeletableChip
Extends [`Tag`](https://react-spectrum.adobe.com/react-aria/TagGroup.html#tag) props from react-aria-components.

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `id` | `Key` | - | Unique identifier (required) |
| `size` | `'medium' \| 'small'` | `'medium'` | Size variant |
| `textValue` | `string` | - | Accessibility text (auto-generated from string children) |
| `classNames` | `{ chip?: string, remove?: string }` | - | Custom classes for chip and remove button |
| `children` | `ReactNode` | - | Chip content |

### ChipProvider
Context provider for setting default props across multiple chips.

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `color` | `'info' \| 'advisory' \| 'normal' \| 'serious' \| 'critical'` | - | Color for all child Chips |
| `size` | `'medium' \| 'small'` | - | Size for all child Chips |
| `children` | `ReactNode` | - | Chip components |

```tsx
<ChipProvider size="small" color="info">
  <Chip>Chip 1</Chip>
  <Chip>Chip 2</Chip>
</ChipProvider>
```

## Accessibility
- Keyboard: Tab to navigate, Enter/Space to select, Delete/Backspace to remove deletable chips
- ARIA attributes for screen readers
- Selection state announcements
- Focus management and visual focus indicators

## Implementation Notes
- Chip renders a `<div>` when used standalone, or wraps `Tag` from react-aria-components when inside ChipList
- SelectableChip and DeletableChip wrap `Tag` from react-aria-components
- ChipList wraps `TagGroup` and `TagList` from react-aria-components
- Icons automatically scale based on size variant

**Related:**
- [React Aria TagGroup](https://react-spectrum.adobe.com/react-aria/TagGroup.html)
- [Github Source](https://github.com/gohypergiant/standard-toolkit/tree/main/packages/design-toolkit/src/components/chip)
