import { Canvas, Meta } from '@storybook/addon-docs/blocks';

import * as ChipStories from './chip.stories';

<Meta of={ChipStories} />

# Chip
The Chip component provides compact, interactive elements for displaying tags, categories, filters, and selectable items. It's built on React Aria Components and provides excellent accessibility out of the box. Chips are commonly used in search interfaces, data tables, form inputs, and anywhere you need to represent discrete pieces of information in a compact, interactive format.

It is composed of the following components:

- **Chip** - Main chip component for displaying tags and labels
- **ChipList** - Container component for grouping multiple chips with shared behavior
- **SelectableChip** - Interactive chip that can be selected/deselected for filtering
- **DeletableChip** - Chip with built-in remove button for dynamic content management
- **ChipProvider** - Context provider for setting default props across multiple chips

## Example usage
```tsx
// Basic chip with default styling
<Chip>Tag</Chip>

// Chip with different colors
<Chip color="info">Information</Chip>
<Chip color="advisory">Warning</Chip>
<Chip color="normal">Success</Chip>
<Chip color="serious">Caution</Chip>
<Chip color="critical">Error</Chip>

// Chip with icon
<Chip color="info">
  <Icon><Placeholder /></Icon>
  With Icon
</Chip>

// Chip with different sizes
<Chip size="medium">Medium Chip</Chip>
<Chip size="small">Small Chip</Chip>

// Chip list for grouping
<ChipList>
  <Chip color="info">Tag 1</Chip>
  <Chip color="advisory">Tag 2</Chip>
  <Chip color="normal">Tag 3</Chip>
</ChipList>

// Selectable chips for filtering
<ChipList
  selectionMode="multiple"
  disallowEmptySelection={false}
>
  <SelectableChip id="filter1">Filter 1</SelectableChip>
  <SelectableChip id="filter2">Filter 2</SelectableChip>
  <SelectableChip id="filter3">Filter 3</SelectableChip>
</ChipList>

// Selectable chips with color
<ChipList selectionMode="single">
  <SelectableChip id="up" color="normal">UP</SelectableChip>
  <SelectableChip id="down" color="critical">DOWN</SelectableChip>
  <SelectableChip id="all" color="info">All</SelectableChip>
</ChipList>

// Deletable chips with remove functionality
<ChipList onRemove={(keys) => console.log('Removed:', keys)}>
  <DeletableChip id="chip1">Deletable 1</DeletableChip>
  <DeletableChip id="chip2">Deletable 2</DeletableChip>
  <DeletableChip id="chip3">Deletable 3</DeletableChip>
</ChipList>

// Using context provider for default props
<ChipProvider size="small" color="info">
  <Chip>Chip 1</Chip>
  <Chip>Chip 2</Chip>
</ChipProvider>

// Chip with custom styling
<Chip
  className="custom-chip-class"
  color="info"
  size="medium"
>
  Custom Chip
</Chip>
```

## Colors

* **info** - Blue styling for informational content (default)
* **advisory** - Yellow styling for advisory/warning content
* **normal** - Green styling for normal/success content
* **serious** - Orange styling for serious issues
* **critical** - Red styling for critical errors or alerts

## Sizes

* **medium** - Standard size with larger text and padding (default for Chip)
* **small** - Compact size with smaller text and padding for space-constrained layouts (default for ChipList)

<Canvas of={ChipStories.Default} />

## Props

### Chip Props
* **`color`** - Visual style color: `'info'` (default) | `'advisory'` | `'normal'` | `'serious'` | `'critical'`
* **`size`** - Size variant: `'medium'` (default) | `'small'`
* **`children`** - Content to display in the chip (text, icons, etc.)
* **`className`** - Additional CSS classes for custom styling

### ChipList Props
* **`color`** - Global color for all child chips
* **`size`** - Global size for all child chips: `'small'` (default) | `'medium'`
* **`items`** - Array of items to render (for controlled rendering)
* **`dependencies`** - Dependencies for re-rendering when they change
* **`renderEmptyState`** - Function to render when no items exist
* **`onRemove`** - Callback when chips are removed (required for deletable chips)
* **`selectionMode`** - Selection behavior: `'none'` | `'single'` | `'multiple'`
* **`disallowEmptySelection`** - Whether empty selection is allowed
* **`disabledKeys`** - Keys of disabled chips
* **`selectedKeys`** - Currently selected chip keys
* **`onSelectionChange`** - Callback when selection changes

### SelectableChip Props
* **`id`** - Unique identifier for the chip
* **`color`** - Visual style color (inherits from context if not specified)
* **`size`** - Size variant (inherits from context if not specified)
* **`className`** - Additional CSS classes for custom styling

### DeletableChip Props
* **`id`** - Unique identifier for the chip
* **`size`** - Size variant (inherits from context if not specified)
* **`textValue`** - Text value for accessibility (auto-generated from children if not provided)
* **`classNames`** - Custom class names for styling:
  * `chip` - Applied to the chip container
  * `remove` - Applied to the remove button
* **`children`** - Content to display in the chip

All chip types accept standard HTML attributes and forward them to the underlying elements.

## Implementation Notes
The `Chip` component wraps the `Tag` component from `react-aria-components`.

[Docs](https://react-spectrum.adobe.com/react-aria/Tag.html)

[Github Source](https://github.com/gohypergiant/standard-toolkit/tree/main/packages/design-toolkit/src/components/chip)

The underlying elements are:
- `div` for basic chips
- `div` with proper ARIA attributes for selectable chips
- `div` with remove button for deletable chips
- `Icon` component for visual indicators and remove buttons

The component automatically handles accessibility features including:
- ARIA attributes for screen readers
- Keyboard navigation (Enter, Space, Delete, Backspace)
- Focus management
- Selection state announcements
- Proper labeling and descriptions
- Group association for screen readers

The component includes sophisticated state management that handles:
- Visual feedback for hover, focus, and selected states
- Proper contrast ratios for all color combinations
- Responsive sizing and spacing
- Icon integration with automatic sizing

The chip automatically adapts its appearance based on the selected color and size, with appropriate color combinations that maintain accessibility standards. All colors use semantic color combinations that provide clear visual hierarchy for different types of information.

The component integrates seamlessly with the Icon component, automatically providing appropriate icon sizing and spacing. The selectable and deletable variants provide interactive functionality while maintaining the visual consistency of the basic chip component. The list container provides flexible layout options with automatic spacing and responsive behavior.

The deletable chip variant automatically includes a remove button with proper accessibility attributes and keyboard support. The selectable chip variant integrates with React Aria's selection system for comprehensive keyboard and screen reader support.
