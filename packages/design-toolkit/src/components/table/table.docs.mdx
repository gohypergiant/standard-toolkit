import { Canvas, Meta } from '@storybook/addon-docs/blocks';

import * as TableStories from './table.stories';

<Meta of={TableStories} />

# Table

Configurable data table with sorting, selection, and row actions built on TanStack React Table.

```tsx
import { createColumnHelper } from '@tanstack/react-table';

type Person = {
  id: string;
  firstName: string;
  lastName: string;
};

const columnHelper = createColumnHelper<Person>();

const columns = [
  columnHelper.accessor('firstName', {
    id: 'firstName',
    cell: (info) => info.getValue(),
    header: () => <span>First Name</span>,
  }),
  columnHelper.accessor('lastName', {
    id: 'lastName',
    cell: (info) => <i>{info.getValue()}</i>,
    header: () => <span>Last Name</span>,
  }),
];

const data = [
  { id: 'tanner', firstName: 'Tanner', lastName: 'Linsley' },
  { id: 'joe', firstName: 'Joe', lastName: 'Dirte' },
];

<Table columns={columns} data={data} showCheckbox />
```

<Canvas of={TableStories.Default} />

## Static Table

For simple tables without sorting or selection, use subcomponents directly.

```tsx
<Table>
  <TableHeader>
    <TableRow>
      <TableHeaderCell>First Name</TableHeaderCell>
      <TableHeaderCell>Last Name</TableHeaderCell>
    </TableRow>
  </TableHeader>
  <TableBody>
    {data.map((person) => (
      <TableRow key={person.id}>
        <TableCell>{person.firstName}</TableCell>
        <TableCell>{person.lastName}</TableCell>
      </TableRow>
    ))}
  </TableBody>
</Table>
```

## Column Sizing

Define a `size` property in column definitions to set fixed widths.

```tsx
columnHelper.accessor('firstName', {
  id: 'firstName',
  header: 'First Name',
  size: 150, // Width in pixels
})
```

<Canvas of={TableStories.ColumnSizing} />

## Row Selection

Track selected rows with `rowSelection` and `onRowSelectionChange`.

```tsx
const [selectedRows, setSelectedRows] = useState({ tanner: true, joe: true });

<Table
  columns={columns}
  data={data}
  showCheckbox
  rowSelection={selectedRows}
  onRowSelectionChange={setSelectedRows}
/>
```

<Canvas of={TableStories.InitialRowSelection} />

## Props

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `columns` | `ColumnDef[]` | — | Array of TanStack column definitions |
| `data` | `T[]` | — | Array of data objects with `id` property |
| `showCheckbox` | `boolean` | — | Show checkbox column for row selection |
| `rowSelection` | `RowSelectionState` | — | Controlled row selection state (object mapping row IDs to boolean) |
| `onRowSelectionChange` | `function` | — | Callback when row selection changes |
| `kebabPosition` | `'left' \| 'right'` | `'right'` | Position of row action menu |
| `persistHeaderKebabMenu` | `boolean` | `true` | Always show header kebab menu |
| `persistRowKebabMenu` | `boolean` | `true` | Always show row kebab menu |
| `persistNumerals` | `boolean` | `false` | Always show row numbers |
| `enableSorting` | `boolean` | `true` | Enable column sorting |
| `enableColumnReordering` | `boolean` | `true` | Enable column reordering |
| `enableRowActions` | `boolean` | `true` | Enable row action menu |
| `manualSorting` | `boolean` | `false` | Server-side sorting mode |
| `onSortChange` | `(columnId, direction) => void` | — | Callback for manual sorting |
| `onColumnReorderChange` | `(index) => void` | — | Callback when column is reordered |
| `fullWidth` | `boolean` | `false` | Apply full width with fixed layout |

## Subcomponents

For static tables, use these subcomponents:

| Component | Description |
|-----------|-------------|
| `TableHeader` | Renders `<thead>` section |
| `TableHeaderCell` | Individual header cell `<th>` |
| `TableBody` | Renders `<tbody>` section |
| `TableRow` | Table row `<tr>` |
| `TableCell` | Data cell `<td>` |

## Accessibility

- Keyboard navigation for sorting and row actions
- ARIA sort attributes on sortable columns
- Screen reader support for selection state

## Related

- [TanStack React Table](https://tanstack.com/table/latest)
- [GitHub Source](https://github.com/gohypergiant/standard-toolkit/tree/main/packages/design-toolkit/src/components/table)
