import { Canvas, Meta } from '@storybook/addon-docs/blocks';

import * as AccordionStories from './accordion.stories';

<Meta of={AccordionStories} />

# Accordion
The Accordion component provides a collapsible content section that can expand and collapse to show or hide content. Accordions are commonly used in navigation menus, FAQ sections, settings panels, and anywhere you need to organize content into expandable sections to save space and improve readability.

It is composed of the following components:

- **[AccordionGroup](?path=/docs/components-accordion-group--playground)** - Container component that groups multiple accordions together and provides shared configuration like variant and multiple expansion behavior.
- **Accordion** - Main accordion component that manages the expand/collapse state and renders the header and panel.
- **AccordionHeader** - Container for the accordion trigger and any additional header elements like menus or action buttons.
- **AccordionTrigger** - Button that controls the expand/collapse state.
- **AccordionPanel** - Collapsible content container that shows/hides based on the accordion's expanded state.

## Example Usage

### Basic
```tsx
<Accordion>
  <AccordionHeader>
    <AccordionTrigger>
      <Icon><Placeholder /></Icon>
      Accordion title
    </AccordionTrigger>
  </AccordionHeader>
  <AccordionPanel>
    <p>This is the accordion content that can be expanded and collapsed.</p>
  </AccordionPanel>
</Accordion>
```
<Canvas of={AccordionStories.Default} />

### With Menu
The accordion header supports an optional [Menu](?path=/docs/components-menu--playground).
```tsx
<Accordion>
  <AccordionHeader>
    <AccordionTrigger>
      <Icon><Placeholder /></Icon>
      Accordion title
    </AccordionTrigger>
    <MenuTrigger>
      <Button />
      <Menu>
        <MenuItem>Foo</MenuItem>
        <MenuItem>Bar</MenuItem>
      </Menu>
    </MenuTrigger>
  </AccordionHeader>
  <AccordionPanel>
    <p>Accordion content...</p>
  </AccordionPanel>
</Accordion>
```
<Canvas of={AccordionStories.WithMenu} />

## Variants
* **cozy** - Standard size with larger text and spacing (default)
* **compact** - Smaller size with reduced text and spacing for space-constrained layouts

The variant can be controlled via the `variant` prop on individual accordions or set globally using the `AccordionGroup` component.

## Props

### Accordion
Extends all [`Disclosure` props](https://react-spectrum.adobe.com/react-aria/Disclosure.html#disclosure-1) from react-aria-components.

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `variant` | `'cozy' \| 'compact'` | `'cozy'` | Visual style variant |
| `isDisabled` | `boolean` | `false` | Whether the accordion is disabled |
| `isExpanded` | `boolean` | - | Controlled expanded state |
| `defaultExpanded` | `boolean` | - | Default expanded state (uncontrolled) |
| `onExpandedChange` | `(isExpanded: boolean) => void` | - | Called when expanded state changes |
| `className` | `string \| ((state) => string)` | - | CSS class name, supports render props |
| `children` | `ReactNode \| ((state) => ReactNode)` | - | Content, supports render props |

#### Render Props
The `className` and `children` props accept a function that receives state:
```tsx
<Accordion>
  {({ isExpanded, isDisabled }) => (
    <>...</>
  )}
</Accordion>
```

### AccordionHeader
Wraps the trigger and optional elements like menus.

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `children` | `ReactNode` | - | Must include `AccordionTrigger`, may include menus |
| `className` | `string` | - | CSS class name |
| `ref` | `Ref<HTMLElement>` | - | Ref to the header element |

### AccordionTrigger
Button controlling expand/collapse state.

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `children` | `ReactNode` | - | Trigger content (typically icon and text) |
| `classNames` | `object` | - | Custom class names (see below) |
| `ref` | `Ref<HTMLHeadingElement>` | - | Ref to the heading element |

**classNames object:**
| Key | Type | Description |
|-----|------|-------------|
| `heading` | `string` | Applied to the heading wrapper |
| `trigger` | `string \| ((state) => string)` | Applied to the button, supports [ButtonRenderProps](https://react-spectrum.adobe.com/react-aria/Button.html#render-props) |

### AccordionPanel
Extends all [`DisclosurePanel` props](https://react-spectrum.adobe.com/react-aria/Disclosure.html#disclosurepanel).

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `children` | `ReactNode \| ((state) => ReactNode)` | - | Panel content, supports render props |
| `className` | `string \| ((state) => string)` | - | CSS class name, supports render props |
| `ref` | `Ref<HTMLDivElement>` | - | Ref to the panel element |

## Accessibility
Built on [react-aria-components Disclosure](https://react-spectrum.adobe.com/react-aria/Disclosure.html), the component provides:
- ARIA attributes for screen readers
- Keyboard support: Enter and Space to toggle expand/collapse
- Focus management
- Proper heading structure
- Expanded/collapsed state announcements

When used within an [AccordionGroup](?path=/docs/components-accordion-group--playground), arrow keys navigate between accordion triggers.

## Implementation Notes
- Wraps `Disclosure` from react-aria-components
- Chevron icon rotates to indicate expanded state
- Use [AccordionGroup](?path=/docs/components-accordion-group--playground) for multiple accordions with shared behavior

**Related:**
- [Disclosure Docs](https://react-spectrum.adobe.com/react-aria/Disclosure.html)
- [Github Source](https://github.com/gohypergiant/standard-toolkit/tree/main/packages/design-toolkit/src/components/accordion)
