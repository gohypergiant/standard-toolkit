import { Canvas, Meta } from '@storybook/addon-docs/blocks';

import * as ListStories from './list.stories';

<Meta of={ListStories} />

# NoticeList
The NoticeList component provides queue management and display functionality for multiple notice notifications. It's built on React Aria Components and provides excellent accessibility out of the box. Notice lists are commonly used to manage system-wide notifications, user feedback queues, and alert systems that need to display multiple messages with automatic timeout and dismissal capabilities.

## Example usage

### Basic Queue Management
```tsx
import { useEmit } from '@accelint/bus/react';
import { NoticeEventTypes } from './events';

function App() {
  const emit = useEmit<NoticeQueueEvent>(NoticeEventTypes.queue);

  const addNotice = () => {
    emit({
      message: "This is a flexible notice that can be either a single or double line",
      color: "info",
      timeout: 5000
    });
  };

  return (
    <div>
      <NoticeList
        aria-label='notice-list'
        placement="top right"
        defaultColor="info"
        limit={3}
      />
      <Button onPress={addNotice}>Add Notice</Button>
    </div>
  );
}
```

<Canvas of={ListStories.Default} />

### Multiple Notice Lists
When you have multiple NoticeList on the page add a unique `aria-label` to each list
```tsx
// Create separate lists for different types of notifications
const infoListId = "info-notices";
const errorListId = "error-notices";

<div>
  <NoticeList
    id={infoListId}
    aria-label='info-notices'
    placement="top right"
    defaultColor="info"
    limit={5}
  />
  <NoticeList
    id={errorListId}
    aria-label='error-notices'
    placement="bottom right"
    defaultColor="critical"
    limit={3}
  />
</div>
```

### Targeted Queue Management
```tsx
// Queue notices to specific lists
emit({
  message: "Information message",
  target: infoListId,
  color: "info"
});

emit({
  message: "Error message",
  target: errorListId,
  color: "critical"
});
```

## Placement Options

* **top left** - Top left corner of the container
* **top** - Top center of the container
* **top right** - Top right corner of the container
* **right** - Middle right of the container
* **bottom right** - Bottom right corner of the container
* **bottom** - Bottom center of the container
* **bottom left** - Bottom left corner of the container
* **left** - Middle left of the container

## Props

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `id` | `string` | - | Unique identifier for the list |
| `global` | `boolean` | `false` | Render at document root |
| `placement` | `'top left' \| 'top' \| 'top right' \| 'right' \| 'bottom right' \| 'bottom' \| 'bottom left' \| 'left'` | - | Position of notices |
| `limit` | `number` | `3` | Max visible notices |
| `defaultColor` | `NoticeColor` | - | Default color for notices |
| `defaultTimeout` | `number` | - | Default timeout in ms |
| `hideClearAll` | `boolean` | `false` | Hide "Clear All" button |
| `size` | `'medium' \| 'small'` | `'medium'` | Default size for notices |
| `classNames` | `{ region?, list?, button?, notice? }` | - | Custom class names |

## Events

The NoticeList uses an event bus for queue management.

| Event | Description |
|-------|-------------|
| `queue` | Add a notice to the queue |
| `dequeue` | Remove a notice from the queue |
| `actionPrimary` | Primary button was pressed |
| `actionSecondary` | Secondary button was pressed |
| `close` | Close button was pressed |

## Queue Management

The NoticeList component uses an event-driven architecture for queue management:

### Adding Notices
```tsx
import { useEmit } from '@accelint/bus/react';
import { NoticeEventTypes } from './events';

const emit = useEmit<NoticeQueueEvent>(NoticeEventTypes.queue);

// Basic notice
emit({
  message: "Operation completed successfully",
  color: "normal"
});

// Notice with custom timeout
emit({
  message: "Warning: Action required",
  color: "advisory",
  timeout: 10000
});

// Notice with actions
emit({
  message: "Delete item?",
  color: "critical",
  primary: { children: "Delete" },
  secondary: { children: "Cancel" }
});

// Notice with metadata for tracking
emit({
  message: "File uploaded",
  color: "info",
  metadata: { fileId: "123", userId: "user-456" }
});
```

### Removing Notices
```tsx
const dequeue = useEmit<NoticeDequeueEvent>(NoticeEventTypes.dequeue);

// Remove by notice ID
dequeue({ id: "b097015f-f8e1-4718-9910-7e16aa6f79d1" });

// Remove by color (all notices of that color)
dequeue({ color: "critical" });

// Remove by metadata (notices matching metadata criteria)
dequeue({ metadata: { category: "upload" } });

// Clear entire list
dequeue({ target: "ad709536-8aa6-4c53-96fd-9bf92380b97f" });
```

### Advanced Queue Examples

#### Dequeue by ID
Remove specific notices by their unique identifier:
```tsx
// Each notice gets a unique ID when queued
const noticeId = "baa2d245-354d-43a1-92b0-89ee242b5318";
emit({ id: noticeId, message: "Action completed" });

// Later, remove this specific notice
dequeue({ id: noticeId });
```

#### Dequeue by Color
Remove all notices of a specific type across lists:
```tsx
// Queue multiple error notices
emit({ message: "Error 1", color: "critical" });
emit({ message: "Error 2", color: "critical" });

// Clear all critical notices at once
dequeue({ color: "critical" });
```

#### Dequeue by Metadata
Remove notices based on custom metadata for complex filtering:
```tsx
// Queue notices with metadata
emit({
  message: "Upload started",
  metadata: { operation: "upload", fileId: "file-123" }
});

emit({
  message: "Processing file",
  metadata: { operation: "process", fileId: "file-123" }
});

// Remove all notices related to a specific file
dequeue({ metadata: { fileId: "file-123" } });
```

## Accessibility

- ARIA live regions for screen reader announcements
- Focus management when notices appear/disappear
- Keyboard navigation support
- Queue state announcements
- Automatic cleanup of expired notices

## Related

- [React Aria Toast](https://react-spectrum.adobe.com/react-aria/Toast.html)
- [GitHub Source](https://github.com/gohypergiant/standard-toolkit/tree/main/packages/design-toolkit/src/components/notice)
