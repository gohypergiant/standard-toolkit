import { Canvas, Meta } from '@storybook/addon-docs/blocks';

import * as SidenavStories from './sidenav.stories';

<Meta of={SidenavStories} />

# Sidenav

A collapsible side navigation panel for hierarchical navigation. Must be used within a `DrawerLayout`.

```tsx
<DrawerLayout push="left">
  <DrawerLayoutMain>
    <SidenavTrigger for={sidenavId}>
      <Button variant="icon" size="large">
        <Icon><MenuIcon /></Icon>
      </Button>
    </SidenavTrigger>
  </DrawerLayoutMain>

  <Sidenav id={sidenavId}>
    <SidenavHeader>
      <SidenavAvatar>
        <Icon><AppLogo /></Icon>
        <Heading>App Name</Heading>
        <Text>subheader</Text>
      </SidenavAvatar>
    </SidenavHeader>

    <SidenavContent>
      <SidenavItem isSelected textValue="Home">
        <Icon><HomeIcon /></Icon>
        <Text>Home</Text>
      </SidenavItem>
      <SidenavMenu title="More" icon={<Icon><MenuIcon /></Icon>}>
        <SidenavMenuItem><Text>Sub Item</Text></SidenavMenuItem>
      </SidenavMenu>
    </SidenavContent>

    <SidenavFooter>
      <SidenavAvatar>
        <Avatar imageProps={{ alt: 'User', src: '/avatar.jpg' }} />
        <Heading>User Name</Heading>
        <Text>email@example.com</Text>
      </SidenavAvatar>
    </SidenavFooter>
  </Sidenav>
</DrawerLayout>
```

<Canvas of={SidenavStories.Default} />

## Component Structure

- **Sidenav**: Root navigation container
- **SidenavTrigger**: Button to toggle sidenav open/closed
- **SidenavHeader**: Header section with toggle button
- **SidenavAvatar**: Avatar display with icon, heading, and text
- **SidenavContent**: Main content container
- **SidenavItem**: Selectable navigation item with tooltip
- **SidenavLink**: External link with tooltip
- **SidenavMenu**: Collapsible menu with nested items
- **SidenavMenuItem**: Item within a SidenavMenu
- **SidenavFooter**: Footer section

## Props

### Sidenav

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `id` | `UniqueId` | Required | Unique identifier for event targeting |
| `isHiddenWhenClosed` | `boolean` | `false` | Unmount when closed |
| `className` | `string` | — | Custom CSS class |

### SidenavTrigger

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `for` | `UniqueId \| 'open:id' \| 'close:id' \| 'toggle:id'` | Required | Target sidenav and action |
| `children` | `ReactNode` | — | Trigger button content |

### SidenavHeader

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `children` | `ReactNode` | — | Header content |
| `classNames` | `object` | — | Custom classes: `header`, `button`, `container`, `icon` |

### SidenavItem

Extends [ToggleButton](?path=/docs/components-button--docs) props.

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `textValue` | `string` | — | Tooltip text when collapsed |
| `classNames` | `object` | — | Custom classes: `button`, `icon` |

### SidenavLink

Extends [Link](?path=/docs/components-link--docs) props.

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `textValue` | `string` | Required | Tooltip text when collapsed |
| `classNames` | `object` | — | Custom classes: `button`, `icon` |

### SidenavMenu

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `title` | `string` | Required | Menu title |
| `icon` | `ReactNode` | Required | Menu icon |
| `children` | `ReactNode` | — | Menu items |
| `classNames` | `object` | — | Custom classes: `menu`, `button`, `icon`, `disclosurePanel`, `popoverPanel`, `panelContent` |

### SidenavMenuItem

Extends [ToggleButton](?path=/docs/components-button--docs) props.

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `className` | `string` | — | Custom CSS class |

### SidenavAvatar

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `children` | `ReactNode` | — | Icon/Avatar + Heading + Text |
| `className` | `string` | — | Custom CSS class |

### SidenavContent / SidenavFooter

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `children` | `ReactNode` | — | Content |
| `className` | `string` | — | Custom CSS class |

## Layout Requirements

1. Wrap in `DrawerLayout` with `push="left"` for push behavior (omit for overlay)
2. Place `SidenavTrigger` in `DrawerLayoutMain`
3. Place `Sidenav` as direct child of `DrawerLayout`

## Accessibility

- ARIA landmarks for navigation regions
- Keyboard navigation (Tab, Arrow keys)
- Focus management for navigation items
- Screen reader announcements for state changes
- Tooltips appear when sidenav is collapsed

## Related

- [DrawerLayout](?path=/docs/components-drawer-layout--docs)
- [GitHub Source](https://github.com/gohypergiant/standard-toolkit/tree/main/packages/design-toolkit/src/components/sidenav)
