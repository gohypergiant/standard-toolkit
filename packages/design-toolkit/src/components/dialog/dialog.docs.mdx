import { Canvas, Meta } from '@storybook/addon-docs/blocks';

import * as DialogStories from './dialog.stories';

<Meta of={DialogStories} />

# Dialog
A modal dialog component that provides a focused, accessible overlay for user interactions. Uses a compound component pattern with proper focus management and accessibility features.

Components:
- **DialogTrigger** - Manages dialog open/close state and trigger behavior
- **Dialog** - Modal overlay container with configurable size and dismissal behavior
- **DialogTitle** - Semantic heading element for dialog titles (renders as `<h2>`)
- **DialogContent** - Wrapper for the main dialog content
- **DialogFooter** - Container for action buttons

## Example Usage

```tsx
<DialogTrigger>
  <Button>Open Dialog</Button>
  <Dialog size="small" isDismissable>
    <DialogTitle>Dialog Title</DialogTitle>
    <DialogContent>
      Dialog content goes here...
    </DialogContent>
    <DialogFooter>
      <Button variant="flat">Cancel</Button>
      <Button>Confirm</Button>
    </DialogFooter>
  </Dialog>
</DialogTrigger>
```
<Canvas of={DialogStories.Default} />

## Sizes

| Size | Description |
|------|-------------|
| `small` | Compact dialog (default), suitable for simple confirmations or brief messages |
| `large` | Spacious dialog, ideal for complex forms or detailed content |

## Props

### DialogTrigger
Extends [DialogTrigger](https://react-spectrum.adobe.com/react-aria/Dialog.html#dialogtrigger) from react-aria-components.

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `isOpen` | `boolean` | - | Controlled open state |
| `defaultOpen` | `boolean` | - | Default open state (uncontrolled) |
| `onOpenChange` | `(isOpen: boolean) => void` | - | Called when open state changes |
| `children` | `ReactNode` | - | Trigger element and Dialog |

### Dialog
Extends [ModalOverlay](https://react-spectrum.adobe.com/react-aria/Modal.html) from react-aria-components.

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `size` | `'small' \| 'large'` | `'small'` | Size variant |
| `isDismissable` | `boolean` | `true` | Whether clicking outside closes the dialog |
| `isKeyboardDismissDisabled` | `boolean` | `false` | Whether to disable Escape key dismissal |
| `parentRef` | `RefObject<HTMLElement>` | - | Custom portal container |
| `classNames` | `object` | - | Custom classes (see below) |
| `children` | `ReactNode` | - | Dialog content |

**classNames:**

| Key | Description |
|-----|-------------|
| `overlay` | Modal overlay backdrop |
| `modal` | Modal container |
| `dialog` | Inner dialog element |

### DialogTitle
Renders as a semantic `<h2>` element with the `title` slot.

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `children` | `ReactNode` | - | Title content |
| `className` | `string` | - | Custom CSS class |

### DialogContent

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `children` | `ReactNode` | - | Main content |
| `className` | `string` | - | Custom CSS class |

### DialogFooter
Automatically provides button sizing based on dialog size.

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `children` | `ReactNode` | - | Footer content (typically Button components) |
| `className` | `string` | - | Custom CSS class |

## Examples

### Local Portal
The dialog can be rendered in a custom container using the `parentRef` prop.
<Canvas of={DialogStories.LocalPortal} />

### Controlled
Dialogs can be controlled with external state via `isOpen` and `onOpenChange` on DialogTrigger.

```tsx
const [open, setOpen] = useState(false);

<DialogTrigger isOpen={open} onOpenChange={setOpen}>
  <Button isDisabled>Disabled Trigger</Button>
  <Dialog>
    <DialogTitle>Dialog Title</DialogTitle>
    <DialogContent>Content here...</DialogContent>
    <DialogFooter>
      <Button variant="flat">Cancel</Button>
      <Button>Confirm</Button>
    </DialogFooter>
  </Dialog>
</DialogTrigger>
<Button onPress={() => setOpen(true)}>Open Dialog</Button>
```
<Canvas of={DialogStories.Controlled} />

## Accessibility
- Full ARIA compliance with proper focus management
- Focus trapping within the dialog while open
- Escape key closes the dialog (unless disabled)
- Screen reader announcements for dialog state

## Implementation Notes
- Wraps `Dialog`, `Modal`, and `ModalOverlay` from react-aria-components
- DialogFooter automatically sizes buttons to match dialog size
- Buttons in DialogFooter automatically close the dialog on press

**Related:**
- [React Aria Dialog Docs](https://react-spectrum.adobe.com/react-aria/Dialog.html)
- [Github Source](https://github.com/gohypergiant/standard-toolkit/tree/main/packages/design-toolkit/src/components/dialog)
