import { Canvas, Meta } from '@storybook/addon-docs/blocks';

import * as OptionsStories from './options.stories';

<Meta of={OptionsStories} />

# Options

A flexible and accessible list component for selectable items with rich content. Built on React Aria's ListBox, it supports sections, icons, descriptions, and various selection modes with full accessibility compliance.

## Basic

```tsx
<Options>
  <OptionsItem textValue="Option 1">
    <Icon><Placeholder /></Icon>
    <OptionsItemLabel>Option 1</OptionsItemLabel>
  </OptionsItem>
  <OptionsItem textValue="Option 2">
    <Icon><Placeholder /></Icon>
    <OptionsItemLabel>Option 2</OptionsItemLabel>
  </OptionsItem>
</Options>
```

<Canvas of={OptionsStories.Default} />

## With Sections

```tsx
<Options>
  <OptionsSection header="Category A">
    <OptionsItem textValue="Item A1">
      <Icon><Placeholder /></Icon>
      <OptionsItemLabel>Item A1</OptionsItemLabel>
    </OptionsItem>
  </OptionsSection>
  <OptionsSection header="Category B">
    <OptionsItem textValue="Item B1">
      <Icon><Placeholder /></Icon>
      <OptionsItemLabel>Item B1</OptionsItemLabel>
    </OptionsItem>
  </OptionsSection>
</Options>
```

<Canvas of={OptionsStories.WithStaticSections} />

## With Descriptions

```tsx
<Options>
  <OptionsItem textValue="Detailed Option">
    <Icon><Info /></Icon>
    <OptionsItemContent>
      <OptionsItemLabel>Detailed Option</OptionsItemLabel>
      <OptionsItemDescription>
        Additional context and information
      </OptionsItemDescription>
    </OptionsItemContent>
  </OptionsItem>
</Options>
```

## Dynamic Sections

<Canvas of={OptionsStories.WithDynamicSections} />

## Multi-Selection

```tsx
const [selectedKeys, setSelectedKeys] = useState<Selection>(new Set(['item-1']));

<Options
  selectionMode="multiple"
  selectedKeys={selectedKeys}
  onSelectionChange={setSelectedKeys}
>
  <OptionsItem id="item-1" textValue="First Item">...</OptionsItem>
  <OptionsItem id="item-2" textValue="Second Item">...</OptionsItem>
</Options>
```

<Canvas of={OptionsStories.WithSelectionState} />

## Virtualized

For large datasets, use React Aria's Virtualizer for performance.

<Canvas of={OptionsStories.Virtualized} />

## Color Variants

```tsx
// Info (default) - neutral or positive actions
<OptionsItem color="info">...</OptionsItem>

// Serious - warnings or caution actions
<OptionsItem color="serious">...</OptionsItem>

// Critical - urgent or dangerous actions
<OptionsItem color="critical">...</OptionsItem>
```

## Props

### Options

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `size` | `'small' \| 'large'` | `'large'` | Size variant |
| `selectionMode` | `'none' \| 'single' \| 'multiple'` | `'single'` | Selection behavior |
| `selectedKeys` | `Selection` | - | Controlled selection state |
| `onSelectionChange` | `(keys: Selection) => void` | - | Selection change handler |
| `items` | `T[]` | - | Data items for dynamic rendering |
| `children` | `ReactNode` | - | Option items or sections |
| `className` | `string` | - | Custom CSS class |

### OptionsItem

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `color` | `'info' \| 'serious' \| 'critical'` | `'info'` | Color variant |
| `textValue` | `string` | - | Text for accessibility and search |
| `isDisabled` | `boolean` | `false` | Whether the option is disabled |
| `classNames` | `{ item?: string; icon?: string }` | - | Custom class names |

### OptionsSection

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `header` | `string` | - | Section header text |
| `items` | `T[]` | - | Data items for dynamic rendering |
| `classNames` | `{ section?: string; header?: string }` | - | Custom class names |

### OptionsItemContent

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `children` | `ReactNode` | - | Label and description components |
| `className` | `string` | - | Custom CSS class |

### OptionsItemLabel

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `children` | `ReactNode` | - | Label text content |
| `className` | `string` | - | Custom CSS class |

### OptionsItemDescription

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `children` | `ReactNode` | - | Description text content |
| `className` | `string` | - | Custom CSS class |

## Accessibility

- Full keyboard navigation with arrow keys and Enter
- Proper ARIA attributes and semantic structure
- Automatic focus management with visual indicators
- `textValue` prop enables type-ahead search

## Related

- [React Aria ListBox](https://react-spectrum.adobe.com/react-aria/ListBox.html)
- [GitHub Source](https://github.com/gohypergiant/standard-toolkit/tree/main/packages/design-toolkit/src/components/options)
