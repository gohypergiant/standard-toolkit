import { Canvas, Meta } from '@storybook/addon-docs/blocks';

import * as SliderStories from './slider.stories';

<Meta of={SliderStories} />

# Slider and Range Slider
The Slider component provides a customizable input control for selecting a single value or range of values within a specified range. It's built on React Aria Components and provides excellent accessibility out of the box. Sliders are commonly used in settings panels, image editors, audio/video controls, and anywhere users need to adjust numeric values with visual feedback.

It is composed of the following components:

- **Slider** - Main slider component for single value with flexible layout options
- **RangeSlider** - Slider variant for selecting a range of values

## Example usage
```tsx
// Basic single value slider
<Slider
  label="Opacity"
  defaultValue={30}
  minValue={0}
  maxValue={100}
  layout="stack"
/>

// Slider with input field
<Slider
  label="Volume"
  defaultValue={50}
  showInput
/>

// Range slider with input fields
<Slider
  label="Price Range"
  defaultValue={[20, 80]}
  minValue={0}
  maxValue={100}
  showInput
  layout="grid"
/>

// Vertical orientation
<Slider
  label="Volume"
  orientation="vertical"
  layout="stack"
  defaultValue={50}
/>

// With custom styling
<Slider
  label="Custom Slider"
  classNames={{slider: 'w-full max-w-md'}}
/>

// With labeled markers
<Slider
  label="Quality"
  defaultValue={50}
  markers={[
    { value: 0, label: 'Low' },
    { value: 50, label: 'Medium' },
    { value: 100, label: 'High' },
  ]}
  showMarkerLabels
/>

// Snap to discrete marker values only
<Slider
  label="Rating"
  defaultValue={50}
  markers={[
    { value: 0, label: 'Poor' },
    { value: 25, label: 'Fair' },
    { value: 50, label: 'Good' },
    { value: 75, label: 'Great' },
    { value: 100, label: 'Excellent' },
  ]}
  snapToMarkers
  showMarkerLabels
/>
```

## Variants

### Layouts
* **stack** - uses flex to lay out slider elements
* **grid** - uses CSS Grid to lay out slider elements

### Orientations
* **horizontal** - Slider moves left to right (default)
* **vertical** - Slider moves bottom to top

<Canvas of={SliderStories.Default} />

## Input Fields

Enable numeric input fields for direct value entry with the `showInput` prop.

### Single Value with Input
<Canvas of={SliderStories.WithInput} />

### Range with Input
<Canvas of={SliderStories.RangeWithInput} />

## Markers

Markers provide visual reference points along the slider track, useful for indicating discrete stops, important values, or labeled positions.

### Labeled Markers
Pass an array of marker objects with `value` and optional `label` properties, then enable `showMarkerLabels` to display text labels.

<Canvas of={SliderStories.WithLabeledMarkers} />

### Range Slider with Markers
Markers can be combined with range sliders.

<Canvas of={SliderStories.RangeWithMarkers} />

## Snap to Markers

When you need discrete selection where users can only choose from predefined values, use the `snapToMarkers` prop. This automatically calculates the appropriate step value to ensure the slider snaps to marker positions.

### Basic Snap to Markers
The slider will only stop at marker values.

<Canvas of={SliderStories.SnapToMarkers} />

### Snap with Labels
Combine `snapToMarkers` with `showMarkerLabels` for clear discrete options.

<Canvas of={SliderStories.SnapToLabeledMarkers} />

### Custom Intervals
Works with any marker configuration, even unevenly spaced values.

<Canvas of={SliderStories.SnapToUnevenMarkers} />

### Range with Snap
Combine `snapToMarkers` with range sliders for discrete range selection.

<Canvas of={SliderStories.RangeWithSnap} />

## Props

### Common Props
* **`label`** - Text label displayed above or beside the slider
* **`layout`** - Layout arrangement: `'stack'` | `'grid'`
* **`orientation`** - Slider direction: `'horizontal'` (default) | `'vertical'`
* **`minValue`** - Minimum allowed value (default: 0)
* **`maxValue`** - Maximum allowed value (default: 100)
* **`showLabel`** - Whether to display the label (default: true)
* **`showInput`** - Whether to display numeric input fields (default: false)
* **`value`** - Controlled value (single number or `[min, max]` for range)
* **`defaultValue`** - Initial value (single number or `[min, max]` for range)
* **`onChange`** - Callback when value changes
* **`step`** - Step increment for the slider

### Marker Props
* **`markers`** - Configure discrete marker points on the slider track:
  * `number` - Creates evenly spaced markers (e.g., `5` creates markers at 0%, 25%, 50%, 75%, 100%)
  * `number[]` - Array of specific values to mark (e.g., `[0, 25, 50, 75, 100]`)
  * `SliderMarker[]` - Array of objects with `value` and optional `label` (e.g., `[{ value: 0, label: 'Low' }]`)
* **`showMarkerLabels`** - Whether to display labels on markers (default: false). Only applies when markers have labels defined. When enabled, the default min/max value display is automatically hidden only if a labeled marker exists at that position (to prevent overlap).
* **`snapToMarkers`** - When true, the slider can only be set to marker values (default: false). Requires markers to be defined. The component automatically calculates the appropriate step value based on marker intervals.

### classNames
* **`classNames`** - Additional CSS classes for custom styling
  * `slider` - Applied to the main slider container
  * `track` - Applied to the slider track
  * `trackValue` - Applied to the slider track value
  * `trackBackground` - Applied to the slider track background
  * `thumb` - Applied to the slider thumb
  * `inputs` - Applied to the input fields wrapper div
  * `input` - Applied to the input field
  * `label` - Applied to the label
  * `minValue` - Applied to the minimum value
  * `maxValue` - Applied to the maximum value
  * `markers` - Applied to the markers container
  * `marker` - Applied to individual marker elements
  * `markerDot` - Applied to the marker dot/tick
  * `markerLabel` - Applied to the marker label text

## Implementation Notes
The `Slider` component wraps the `Slider` component from `react-aria-components`.

[Docs](https://react-spectrum.adobe.com/react-aria/Slider.html)

[Github Source](https://github.com/gohypergiant/standard-toolkit/tree/main/design-toolkit/components/src/components/slider)

The underlying elements are:
- `div` for the slider container with grid-based layout
- `label` for the slider label
- `div` for the slider track and background
- `div` elements for marker dots and labels (when markers are configured)
- `button` elements for the slider thumbs
- `input` elements for numeric input fields (when enabled)
- `span` elements for min/max value display

The component automatically handles accessibility features including:
- ARIA attributes for screen readers
- Keyboard navigation (Arrow keys, Page Up/Down, Home/End)
- Focus management
- Form integration
- Value announcements
- Tooltip display for current values (hidden when input fields are shown)
- Markers are rendered with `aria-hidden="true"` as they are purely visual indicators

The component integrates with the Tooltip system to show current values on hover and provides flexible layout options through CSS Grid-based positioning.
