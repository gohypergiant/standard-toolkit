import { Canvas, Controls, Meta } from '@storybook/addon-docs/blocks';

import * as SearchFieldStories from './search-field.stories';

<Meta of={SearchFieldStories} />

# SearchField

A search input with integrated search icon, loading state, and clear functionality.

## Basic

```tsx
<SearchField
  inputProps={{ placeholder: 'Search...' }}
  onSubmit={(value) => console.log('Search:', value)}
  onChange={(value) => setQuery(value)}
/>
```

<Canvas of={SearchFieldStories.Default} />
<Controls of={SearchFieldStories.Default} />

## With Provider

```tsx
<SearchFieldProvider variant="filled">
  <SearchField inputProps={{ placeholder: 'Search 1' }} />
  <SearchField inputProps={{ placeholder: 'Search 2' }} />
</SearchFieldProvider>
```

## Component Structure

- **SearchField**: Main search input with icons and clear button
- **SearchFieldProvider**: Context provider for default props

## Props

### SearchField

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `variant` | `'outline' \| 'filled'` | `'outline'` | Visual style variant |
| `value` | `string` | — | Controlled input value |
| `defaultValue` | `string` | — | Default value (uncontrolled) |
| `onChange` | `(value: string) => void` | — | Called when input changes |
| `onSubmit` | `(value: string) => void` | — | Called on Enter key press |
| `onClear` | `() => void` | — | Called when clear button clicked |
| `isLoading` | `boolean` | `false` | Shows loading spinner instead of clear button |
| `isDisabled` | `boolean` | `false` | Disables the search field |
| `inputProps` | `InputProps` | — | Props passed to input element |
| `classNames` | `object` | — | Custom classes: `field`, `input`, `search`, `loading`, `clear` |

### SearchFieldProvider

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `variant` | `'outline' \| 'filled'` | — | Default variant for child SearchFields |
| `children` | `ReactNode` | — | SearchField components |

## Accessibility

- Enter submits search, Escape clears input
- Automatic ARIA attributes for screen readers
- Loading state announcements
- Clear button visibility based on input state

## Related

- [React Aria SearchField](https://react-spectrum.adobe.com/react-aria/SearchField.html)
- [GitHub Source](https://github.com/gohypergiant/standard-toolkit/tree/main/packages/design-toolkit/src/components/search-field)
