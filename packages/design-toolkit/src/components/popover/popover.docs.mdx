import { Canvas, Meta } from '@storybook/addon-docs/blocks';

import * as PopoverStories from './popover.stories';

<Meta of={PopoverStories} />

# Popover
A flexible and accessible popover component that provides contextual information, actions, or content overlays. Built on top of React Aria Components, the Popover component offers a comprehensive solution for displaying additional content without disrupting the main user interface flow. Perfect for tooltips, context menus, and informational overlays.

It is composed of the following components:

- **PopoverTrigger** - Root component that manages popover state and positioning
- **Popover** - Main popover container with positioning and backdrop
- **PopoverTitle** - Optional semantic heading for the popover
- **PopoverContent** - Main content area for the popover
- **PopoverFooter** - Optional footer area for actions or additional content

## Example usage
```tsx
// Basic popover with title and content
<PopoverTrigger>
  <Icon><Information /></Icon>
  <Popover>
    <PopoverTitle>Information</PopoverTitle>
    <PopoverContent>This is helpful information.</PopoverContent>
  </Popover>
</PopoverTrigger>

// Popover with actions and footer
<PopoverTrigger>
  <Button variant="icon">
    <Icon><Delete /></Icon>
  </Button>
  <Popover>
    {({ close }) => (
      <>
        <PopoverTitle>Delete Item</PopoverTitle>
        <PopoverContent>Are you sure you want to delete this?</PopoverContent>
        <PopoverFooter>
          <Button variant="flat" onPress={close}>Cancel</Button>
          <Button variant="filled" onPress={close}>Delete</Button>
        </PopoverFooter>
      </>
    )}
  </Popover>
</PopoverTrigger>

// Custom placement and styling
<PopoverTrigger>
  <span>Settings</span>
  <Popover classNames={{ popover: 'min-w-sm' }} placement="right">
    <PopoverTitle>Settings</PopoverTitle>
    <PopoverContent>Configure your preferences here.</PopoverContent>
  </Popover>
</PopoverTrigger>
```

## Placements

The Popover component supports different placement options to position the popover relative to its trigger:

* **bottom** - Popover appears below the trigger (default)
* **top** - Popover appears above the trigger
* **left** - Popover appears to the left of the trigger
* **right** - Popover appears to the right of the trigger

**bottom** is the default placement and should be used for most use cases, while other placements are better suited for specific layout constraints or design requirements.

<Canvas of={PopoverStories.Simple} />

## Props

### PopoverTrigger Props
- **`isOpen`** - Whether the popover is currently open
- **`onOpenChange`** - Callback when open state changes

### Popover Props
- **`placement`** - Placement variant: `'left'` | `'right'` | `'top'` | `'bottom'` (default: `'bottom'`)
- **`children`** - Popover trigger and content components

### PopoverTitle Props
- **`children`** - Title text content
- **`className`** - Custom CSS class name for the title

### PopoverContent Props
- **`children`** - Body content
- **`className`** - Custom CSS class name for the body

### PopoverFooter Props
- **`children`** - Footer content (typically action buttons)
- **`className`** - Custom CSS class name for the footer

### HTML Attributes
The component accepts all standard HTML attributes for the respective elements, such as:
- **`id`** - Unique identifier
- **`aria-label`** - Accessible label
- **`data-*`** - Custom data attributes

## Features

### Flexible Content Rendering
Support for both static content and dynamic render functions:
```tsx
// Static content
<Popover>
  <PopoverTitle>Static Title</PopoverTitle>
  <PopoverContent>Static content</PopoverContent>
</Popover>

// Dynamic content with close callback
<Popover>
  {({ close }) => (
    <>
      <PopoverTitle>Dynamic Title</PopoverTitle>
      <PopoverContent>Dynamic content</PopoverContent>
      <PopoverFooter>
        <Button onPress={close}>Close</Button>
      </PopoverFooter>
    </>
  )}
</Popover>
```

### Placement Control
Automatic positioning with multiple placement options:
```tsx
// Different placements for different use cases
<Popover placement="top">...</Popover>    // Above trigger
<Popover placement="right">...</Popover>  // To the right
<Popover placement="left">...</Popover>   // To the left
<Popover placement="bottom">...</Popover> // Below trigger (default)
```

### Accessibility
Built-in accessibility features ensure proper interaction and screen reader support:
- **Focus Management**: Automatic focus handling when opening/closing
- **Screen Reader Support**: Proper ARIA attributes and semantic structure
- **Keyboard Navigation**: Escape key closes the popover
- **Backdrop Interaction**: Clicking outside closes the popover
- **Trigger Association**: Proper connection between trigger and content

### Custom Styling
Flexible styling through className props:
```tsx
<Popover className="min-w-sm max-w-md">
  <PopoverTitle className="text-lg font-bold">Custom Title</PopoverTitle>
  <PopoverContent className="text-sm">Custom body styling</PopoverContent>
</Popover>
```

## Examples

### Simple Popover
<Canvas of={PopoverStories.Simple} />

### With Actions
<Canvas of={PopoverStories.WithActions} />

### Custom Composition
<Canvas of={PopoverStories.CustomComposition} />

### Different Placements
```tsx
<div className="flex gap-4">
  <PopoverTrigger>
    <Button>Top</Button>
    <Popover placement="top">
      <PopoverContent>Appears above</PopoverContent>
    </Popover>
  </PopoverTrigger>

  <PopoverTrigger>
    <Button>Right</Button>
    <Popover placement="right">
      <PopoverContent>Appears to the right</PopoverContent>
    </Popover>
  </PopoverTrigger>
</div>
```

### Form in Popover
```tsx
<PopoverTrigger>
  <Button>Edit Profile</Button>
  <Popover>
    <PopoverTitle>Edit Profile</PopoverTitle>
    <PopoverContent>
      <form className="space-y-4">
        <input placeholder="Name" />
        <input placeholder="Email" />
      </form>
    </PopoverContent>
    <PopoverFooter>
      <Button variant="flat">Cancel</Button>
      <Button variant="filled">Save</Button>
    </PopoverFooter>
  </Popover>
</PopoverTrigger>
```

### Information Tooltip
```tsx
<PopoverTrigger>
  <Icon className="text-blue-500"><Question /></Icon>
  <Popover>
    <PopoverContent>
      This feature allows you to customize your experience.
    </PopoverContent>
  </Popover>
</PopoverTrigger>
```

## Use Cases

The Popover component is ideal for:

- **Tooltips**: Providing additional context for UI elements
- **Context Menus**: Quick actions related to specific content
- **Form Extensions**: Additional input fields or options
- **Information Overlays**: Help text, descriptions, or metadata
- **Action Confirmation**: Quick confirmations without page navigation
- **Settings Panels**: Compact configuration options

## Implementation Notes
The `Popover` component is built using React Aria Components and provides a flexible, accessible popover system with comprehensive positioning and content management.

[Docs](https://react-spectrum.adobe.com/react-aria/Popover.html)

[Github Source](https://github.com/gohypergiant/standard-toolkit/tree/main/packages/design-toolkit/src/components/popover)

Key features:
- **Accessibility**: Full ARIA compliance with proper focus management and screen reader support
- **Flexible Positioning**: Multiple placement options with automatic positioning
- **Content Management**: Support for static and dynamic content rendering
- **Trigger Integration**: Seamless integration with various trigger elements
- **Responsive Design**: Automatic positioning that adapts to viewport constraints
- **Type Safety**: Full TypeScript support with comprehensive prop types
- **React Aria Integration**: Built on top of RAC for enhanced accessibility
