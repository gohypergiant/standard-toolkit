import { Canvas, Meta } from '@storybook/addon-docs/blocks';

import * as PopoverStories from './popover.stories';

<Meta of={PopoverStories} />

# Popover

A floating content container positioned relative to a trigger element. Built on React Aria's Popover and Dialog, it provides accessible contextual overlays for information, actions, or forms.

## Basic

```tsx
<PopoverTrigger>
  <Button>Show Info</Button>
  <Popover>
    <PopoverTitle>Information</PopoverTitle>
    <PopoverContent>This is helpful information.</PopoverContent>
  </Popover>
</PopoverTrigger>
```

<Canvas of={PopoverStories.Simple} />

## With Actions

```tsx
<PopoverTrigger>
  <Button variant="icon">
    <Icon><Delete /></Icon>
  </Button>
  <Popover>
    {({ close }) => (
      <>
        <PopoverTitle>Delete Item</PopoverTitle>
        <PopoverContent>Are you sure you want to delete this?</PopoverContent>
        <PopoverFooter>
          <Button variant="flat" onPress={close}>Cancel</Button>
          <Button variant="filled" onPress={close}>Delete</Button>
        </PopoverFooter>
      </>
    )}
  </Popover>
</PopoverTrigger>
```

<Canvas of={PopoverStories.WithActions} />

## Custom Composition

<Canvas of={PopoverStories.CustomComposition} />

## Placement

```tsx
<Popover placement="top">...</Popover>    // Above trigger
<Popover placement="right">...</Popover>  // To the right
<Popover placement="left">...</Popover>   // To the left
<Popover placement="bottom">...</Popover> // Below trigger (default)
```

## Props

### PopoverTrigger

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `isOpen` | `boolean` | - | Controlled open state |
| `onOpenChange` | `(isOpen: boolean) => void` | - | Open state change handler |
| `children` | `ReactNode` | - | Trigger element and Popover |

### Popover

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `placement` | `'top' \| 'bottom' \| 'left' \| 'right'` | `'bottom'` | Position relative to trigger |
| `children` | `ReactNode \| ((opts: { close: () => void }) => ReactNode)` | - | Content or render function |
| `classNames` | `{ popover?: string; dialog?: string }` | - | Custom class names |

### PopoverTitle

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `children` | `ReactNode` | - | Title text |
| `className` | `string` | - | Custom CSS class |

### PopoverContent

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `children` | `ReactNode` | - | Body content |
| `className` | `string` | - | Custom CSS class |

### PopoverFooter

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `children` | `ReactNode` | - | Footer content (typically actions) |
| `className` | `string` | - | Custom CSS class |

## Accessibility

- Automatic focus management when opening/closing
- Escape key closes the popover
- Click outside closes the popover
- Proper ARIA attributes connecting trigger and content

## Related

- [React Aria Popover](https://react-spectrum.adobe.com/react-aria/Popover.html)
- [GitHub Source](https://github.com/gohypergiant/standard-toolkit/tree/main/packages/design-toolkit/src/components/popover)
