import { Meta } from '@storybook/blocks';

<Meta title='Viewport/useViewportState' />

# `useViewportState()`
A react hook for syncing to viewport events.  A thin wrapper around [useSyncExternalStore](https://react.dev/reference/react/useSyncExternalStore), it provides default `subscribe` and `getSnapshot` functions that listen to the Bus for viewport events and signal react to re-render.

## Usage

```typescript
import { useViewportState } from '@accelint/map-toolkit/viewport'

// basic usage
function MapInfo() {
  const { bounds, latitude, longitude, zoom } = useViewportState({
    viewId: 'default'
  });

  return (
    <div>
      Lat: {latitude?.toFixed(2)}, Lon: {longitude?.toFixed(2)}, Zoom: {zoom}
    </div>
  );
}

// customized - NOTE: functions passed must be stable! Don't define them inside your component if you can help it.
const customSubscribe = (onStoreChange) => {
  // Custom subscription logic
  return () => { // cleanup }
}

const customGetSnapshot = () => {
  // Custom snapshot logic
  return { latitude: 0, longitude: 0, zoom: 1 };
};

function CustomMapInfo() {

  const viewState = useViewportState({
    viewId: 'custom',
    subscribe: customSubscribe,
    getSnapshot: customGetSnapshot,
  });

  return <div>Custom viewport state</div>;
}
```

## Props

# viewId
**Required** - Identifier of the subscribed Viewport

# subscribe
**Optional** - custom `useSyncExternalStore` subscribe function

# getSnapshot
**Optional** - custom `useSyncExternalStore` getSnapshot function

# getServerSnapshot
**Optional** - custom `useSyncExternalStore` getServerSnapshot function


