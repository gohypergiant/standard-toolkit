import { Canvas, Meta } from '@storybook/addon-docs/blocks';

import * as HoverCoordinateStories from './hover-coordinate.stories';

<Meta of={HoverCoordinateStories} />

# Hover Coordinate
A hook that retrieves the coordinates of the mouse's current hovered position on a BaseMap.

## Dependencies

Map Cursor requires the following dependencies:

**Required:**
- [`@accelint/bus`](https://github.com/gohypergiant/standard-toolkit/tree/main/packages/bus) - Event bus for decoupled communication between cursor consumers
- [`@accelint/core`](https://github.com/gohypergiant/standard-toolkit/tree/main/packages/core) - Core utilities including unique ID generation
- [`@accelint/map-toolkit/hover-coordinate`](../hover-coordinate/hover-coordinate.docs.mdx) - Returns formatted hovered coordinate for a map instance

**React Integration:**
- `react` - React 19.0.0 or higher for the `useHoverCoordinate` hook and context

**Installation:**

```bash
npm install @accelint/map-toolkit @accelint/bus @accelint/core react
# or
pnpm add @accelint/map-toolkit @accelint/bus @accelint/core react
```

## Example usage
```tsx
import { BaseMap } from '@accelint/map-toolkit/deckgl';
import { FormatTypes, useHoverCoordinate } from "@accelint/map-toolkit/hover-coordinate";
import { uuid } from '@accelint/core';

// Module-level constant shared across components
const MAIN_MAP_ID = uuid();

function HoverCoordinate() {
  const { formattedCoord, setFormat } = useHoverCoordinate(MAIN_MAP_ID);

  useEffect(() => {
    setFormat('mgrs');
  }, [setFormat]);

  return (
    <div className="absolute top-0 left-0 size-[300px] h-auto">
      {formattedCoord}
    </div>
  );
}

export function App() {
  return (
    <div className="relative w-full h-full">
      <BaseMap id={MAIN_MAP_ID} className="absolute inset-0" />
      <HoverCoordinate />
    </div>
  );
}
```

## React API Reference

### `useHoverCoordinate(id?)`

Hook to access hovered coordinate of a map instance.

#### Parameters

##### `id?: UniqueId`

The map ID to access. **Recommended**: Always pass this parameter for UI components that are siblings to `BaseMap`.

#### Returns

```tsx
{
  setFormat: (format: FormatTypes) => void;                   // Set the desired coordinate system
  formattedCoord: string;                   // The coordinate in passed format, defaults to decimal degrees
}
```

#### Throws

- `Error` if no `id` is provided and hook is used outside of `MapProvider`

## Events

Hover Coordinate listens for hover events using `@accelint/bus`. BaseMap instances will handle this automatically -
if using an alternative map component, import `MapEvents.hover` from `base-map/events` and emit your own hover
actions on the accelint bus to pass the coordinate value to this hook.

[Github Source](https://github.com/gohypergiant/standard-toolkit)
